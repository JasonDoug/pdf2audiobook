{"version":3,"sources":["turbopack:///[project]/Projects/Clones/pdf2audiobook/frontend/src/app/jobs/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { getJobs } from '../../lib/api'\nimport { Job } from '../../lib/types'\nimport Link from 'next/link'\nimport { useAuth } from '@clerk/nextjs'\n\nconst hasClerkKey =\n  typeof process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY === 'string' &&\n  process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY.startsWith('pk_')\n\nexport default function JobsPage() {\n  const [jobs, setJobs] = useState<Job[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const { getToken } = useAuth()\n\n  useEffect(() => {\n    const fetchJobs = async () => {\n      try {\n        if (!hasClerkKey) {\n          setIsLoading(false)\n          return\n        }\n\n        const token = await getToken()\n        if (!token) {\n          setIsLoading(false)\n          return\n        }\n\n        const fetchedJobs = await getJobs(token)\n        setJobs(fetchedJobs)\n      } catch (error) {\n        console.error('Failed to fetch jobs:', error)\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    fetchJobs()\n  }, [getToken])\n\n  if (!hasClerkKey) {\n    return (\n      <div className=\"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <h1 className=\"text-2xl md:text-3xl font-bold text-gray-900 mb-4\">\n          My Jobs\n        </h1>\n        <p className=\"text-sm text-gray-600\">\n          Clerk is not configured in this environment, so job history cannot be\n          loaded. In production, this page will show your PDF-to-audiobook\n          conversions.\n        </p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n      <div className=\"text-center mb-12\">\n        <h1 className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-4\">\n          My Jobs\n        </h1>\n        <p className=\"text-xl text-gray-600\">\n          Here are all the PDF to audiobook conversions you have submitted.\n        </p>\n      </div>\n\n      {isLoading ? (\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4\">Loading jobs...</p>\n        </div>\n      ) : jobs.length === 0 ? (\n        <div className=\"text-center\">\n          <p className=\"text-lg\">You haven't created any jobs yet.</p>\n          <Link\n            href=\"/upload\"\n            className=\"text-blue-600 hover:underline mt-4 inline-block\"\n          >\n            Create your first job\n          </Link>\n        </div>\n      ) : (\n        <div className=\"bg-white rounded-lg shadow-lg overflow-hidden\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th\n                  scope=\"col\"\n                  className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                >\n                  Filename\n                </th>\n                <th\n                  scope=\"col\"\n                  className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                >\n                  Status\n                </th>\n                <th\n                  scope=\"col\"\n                  className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                >\n                  Progress\n                </th>\n                <th\n                  scope=\"col\"\n                  className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                >\n                  Created At\n                </th>\n                <th scope=\"col\" className=\"relative px-6 py-3\">\n                  <span className=\"sr-only\">View</span>\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {jobs.map((job) => (\n                <tr key={job.id}>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                    {job.original_filename}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    <span\n                      className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\n                        job.status === 'completed'\n                          ? 'bg-green-100 text-green-800'\n                          : job.status === 'failed'\n                            ? 'bg-red-100 text-red-800'\n                            : 'bg-yellow-100 text-yellow-800'\n                      }`}\n                    >\n                      {job.status}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {job.progress_percentage}%\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {new Date(job.created_at).toLocaleString()}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                    <Link\n                      href={`/jobs/${job.id}`}\n                      className=\"text-blue-600 hover:text-blue-900\"\n                    >\n                      View\n                    </Link>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}